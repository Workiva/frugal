project: frugal
language: golang

# https://github.com/Workiva/messaging-docker-images/commit/6561ce2b439cf8081838d879fdfc5d301a14c6cb
runner_image: drydock.workiva.org/workiva/messaging-docker-images:69150

script:
    - ./scripts/smithy.sh
    - tar -czf goLib.tar.gz ./lib/go
    - export PATH=$PATH:./bin && ./frugal --gen dart -r --out='test/integration/dart/gen-dart' test/integration/frugalTest.frugal

artifacts:
    artifactory:
        - frugal-*.jar
    release:
        - /frugal
    go_library:
        - goLib.tar.gz
    pub:
        - frugal.pub.tgz
    pypi:
        - frugal-*.tar.gz
