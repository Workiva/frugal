---
base: 'ubuntu/trusty'

apt:
  packages:
    - automake
    - libtool
    - g++
    - byacc
    - make
    - pkg-config
    - flex
    - git
    - golang

after_install:
  - export PATH=$PATH:/usr/local/go/bin
  - git clone https://git-wip-us.apache.org/repos/asf/thrift.git
  - cd thrift
  - ./bootstrap.sh
  - ./configure
  - make
  - make install
  - cd ..
  - rm -rf thrift
  - cp /build/smithy/frugal /bin
  - chmod 755 /bin/frugal

volumes:
  - 'data'

workdir: ../../data

add:
  bin/thrift: /usr/local/bin/thrift

cmd: ["frugal"]
