version: 2
registries:
  maven-repository-workivaeast-jfrog-io-workivaeast-maven-prod:
    type: maven-repository
    url: https://workivaeast.jfrog.io/workivaeast/maven-prod
    username: dependabot
    password: "${{secrets.MAVEN_REPOSITORY_WORKIVAEAST_JFROG_IO_WORKIVAEAST_MAVEN_PROD_PASSWORD}}"
updates:
  - package-ecosystem: "gomod"
    directory: "/lib/go"
    schedule:
      interval: "weekly"
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "go-lib: "
  - package-ecosystem: "gomod"
    directory: "/"
    schedule:
      interval: "weekly"
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "go-tool: "
  - package-ecosystem: "maven"
    registries:
    - maven-repository-workivaeast-jfrog-io-workivaeast-maven-prod
    ignore:
      # Ignore all semver major upgrades
      - dependency-name: "*"
        update-types: [ "version-update:semver-major" ]
    directory: "/lib/java"
    schedule:
      interval: "weekly"
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "java-lib: "
  - package-ecosystem: "maven"
    registries:
    - maven-repository-workivaeast-jfrog-io-workivaeast-maven-prod
    ignore:
      # Ignore all semver major upgrades
      - dependency-name: "*"
        update-types: [ "version-update:semver-major" ]
      - dependency-name: "io.nats:jnats"
        # Issue fixed in https://github.com/nats-io/nats.java/pull/874
        versions: ["2.16.9"]
    directory: "/examples/java"
    schedule:
      interval: "weekly"
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "java-exam: "
  - package-ecosystem: "gomod"
    directory: "/examples/go"
    schedule:
      interval: "weekly"
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "go-exam: "
  - package-ecosystem: "maven"
    registries:
    - maven-repository-workivaeast-jfrog-io-workivaeast-maven-prod
    ignore:
      # Ignore all semver major upgrades
      - dependency-name: "*"
        update-types: [ "version-update:semver-major" ]
    directory: "/test/integration/java/frugal-integration-test"
    schedule:
      interval: "weekly"
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "java-test: "
  - package-ecosystem: "gomod"
    directory: "/test/integration"
    schedule:
      interval: "weekly"
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "go-test: "
  - package-ecosystem: "pip"
    directory: "/lib/python"
    schedule:
      interval: "weekly"
    ignore:
      # ignore all updates for version python2 libraries
      - dependency-name: "coverage"
        versions: [ "5.6b1", "5.5b1" ]
      - dependency-name: "mock"
        versions: [ "3.0.5", "3.0.0"]
    target-branch: "develop"
    reviewers:
      - "Workiva/service-platform"
    commit-message:
      prefix: "py-lib: "
