name: go-integration-tests

run:
  when-branch-name-is:
    - .+

contact: messaging@workiva.com

# https://github.com/Workiva/messaging-docker-images/commit/6561ce2b439cf8081838d879fdfc5d301a14c6cb
image: drydock.workiva.org/workiva/messaging-docker-images:69150

also-run:
  Workiva/messaging-sdk:go-tests:
    on-pull-request: true
  Workiva/messaging-sdk:java-tests:
    on-pull-request: true

env:
  - GORACE="halt_on_errors=1"

scripts:

  - ./scripts/skynet/run_go_integration_tests_skynet.sh

timeout: moderate

test-reports:
  - /testing/reports


---

# TODO: change test/integration/test.py line 100 when this configuration is no longer needed
name: cross

run:
  when-branch-name-is:
    - .+

contact: messaging@workiva.com

# https://github.com/Workiva/messaging-docker-images/commit/6561ce2b439cf8081838d879fdfc5d301a14c6cb
image: drydock.workiva.org/workiva/messaging-docker-images:69150


scripts:
  - ./scripts/skynet/run_cross_skynet.sh


timeout: long

artifacts:
  - /testing/artifacts

---

name: cross-gen_with_thrift

run:
  when-branch-name-is:
    - .+

contact: messaging@workiva.com

# https://github.com/Workiva/messaging-docker-images/commit/6561ce2b439cf8081838d879fdfc5d301a14c6cb
image: drydock.workiva.org/workiva/messaging-docker-images:69150


scripts:
  - ./scripts/skynet/run_cross_skynet.sh -gen_with_thrift

timeout: long

artifacts:
  - /testing/artifacts
